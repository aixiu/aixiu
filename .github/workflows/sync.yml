# .github/workflows/sync.yml
name: Sync Fork åŒæ­¥referenceä¸Šæ¸¸åº“

on:
  # push: # push æ—¶è§¦å‘, ä¸»è¦æ˜¯ä¸ºäº†æµ‹è¯•é…ç½®æœ‰æ²¡æœ‰é—®é¢˜
  schedule:
    # - cron: '10 0,8 * * *' # æ¯å¤©0æ—¶å’Œ8æ—¶ ç¬¬10åˆ†è§¦å‘, å¯¹äºä¸€äº›æ›´æ–°ä¸é‚£ä¹ˆé¢‘ç¹çš„é¡¹ç›®å¯ä»¥è®¾ç½®ä¸ºæ¯å¤©ä¸€æ¬¡, ä½ç¢³ä¸€ç‚¹
    - cron: '30 */8 * * *'  # æ¯å…«å°æ—¶æ‰§è¡Œä¸€æ¬¡   
  workflow_dispatch: # æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ

env: # è®¾ç½®ç¯å¢ƒå˜é‡
  TZ: Asia/Shanghai # æ—¶åŒºï¼ˆè®¾ç½®æ—¶åŒºå¯ä½¿é¡µé¢ä¸­çš„`æœ€è¿‘æ›´æ–°æ—¶é—´`ä½¿ç”¨æ—¶åŒºæ—¶é—´ï¼‰
  
jobs:
  repo-sync:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ€ sync gh-pages
        uses: AbdulmelikKalkan/sync-fork-upstream@v1.3
        env:
          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }} # è¿™æ‚¨å¿…é¡»ä¸ºç”¨æˆ·æä¾›ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ç¡®ä¿ä»¤ç‰Œå…·æœ‰â€œpublic_repoâ€æƒé™ï¼Œå¹¶å°†ä»¤ç‰Œå­˜å‚¨åœ¨å­˜å‚¨åº“æœºå¯†ä¸­ã€‚
        with:          
          owner: aixiu # éœ€è¦åŒæ­¥çš„å­˜å‚¨åº“è´¦æˆ·æ‰€æœ‰è€… user
          repo: reference  # éœ€è¦åŒæ­¥çš„å­˜å‚¨åº“åç§°
          branch: gh-pages # éœ€è¦åŒæ­¥åˆ°æœ¬é¡¹ç›®çš„ç›®æ ‡åˆ†æ”¯

      - name: ğŸŒ¿ sync main
        uses: AbdulmelikKalkan/sync-fork-upstream@v1.3
        env:
          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }} # è¿™æ‚¨å¿…é¡»ä¸ºç”¨æˆ·æä¾›ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ç¡®ä¿ä»¤ç‰Œå…·æœ‰â€œpublic_repoâ€æƒé™ï¼Œå¹¶å°†ä»¤ç‰Œå­˜å‚¨åœ¨å­˜å‚¨åº“æœºå¯†ä¸­ã€‚
        with:          
          owner: aixiu # éœ€è¦åŒæ­¥çš„å­˜å‚¨åº“è´¦æˆ·æ‰€æœ‰è€… userè´¦æˆ·æ‰€æœ‰è€… user
          repo: reference # éœ€è¦åŒæ­¥çš„å­˜å‚¨åº“åç§°
          branch: main # éœ€è¦åŒæ­¥åˆ°æœ¬é¡¹ç›®çš„ç›®æ ‡åˆ†æ”¯
